<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitApp - Administrador de Rutinas de Gimnasio</title>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e293b, #7c3aed, #1e293b);
            min-height: 100vh;
            color: #ffffff;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #8b5cf6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #cbd5e1;
            font-size: 1.1em;
        }

        .nav-tabs {
            display: flex;
            background: rgba(30, 41, 59, 0.8);
            border-radius: 12px;
            padding: 8px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            color: #cbd5e1;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 1em;
            font-weight: 500;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
        }

        .nav-tab:hover:not(.active) {
            background: rgba(75, 85, 99, 0.5);
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(30, 41, 59, 0.8);
            padding: 25px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(139, 92, 246, 0.2);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card h3 {
            color: #cbd5e1;
            font-size: 0.9em;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .stat-card .value {
            font-size: 2.2em;
            font-weight: bold;
            background: linear-gradient(135deg, #8b5cf6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .chart-container {
            background: rgba(30, 41, 59, 0.8);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .chart-container h3 {
            margin-bottom: 20px;
            color: #cbd5e1;
        }

        .chart {
            width: 100%;
            height: 300px;
            position: relative;
        }

        .routines-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }

        .routine-card {
            background: rgba(30, 41, 59, 0.8);
            padding: 25px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .routine-card h3 {
            color: #8b5cf6;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .exercise {
            background: rgba(75, 85, 99, 0.3);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            display: flex;
            justify-content: between;
            align-items: center;
        }

        .exercise-info {
            flex: 1;
        }

        .exercise-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .exercise-details {
            color: #cbd5e1;
            font-size: 0.9em;
        }

        .start-btn {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9em;
        }

        .start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }

        .timer-container {
            max-width: 400px;
            margin: 0 auto;
            text-align: center;
        }

        .timer-card {
            background: rgba(30, 41, 59, 0.9);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(139, 92, 246, 0.3);
            box-shadow: 0 8px 32px rgba(139, 92, 246, 0.2);
        }

        .timer-display {
            font-size: 4em;
            font-weight: bold;
            margin: 20px 0;
            background: linear-gradient(135deg, #8b5cf6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .timer-progress {
            width: 100%;
            height: 8px;
            background: rgba(75, 85, 99, 0.5);
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .timer-progress-bar {
            height: 100%;
            background: linear-gradient(135deg, #8b5cf6, #06b6d4);
            width: 0%;
            transition: width 1s linear;
            border-radius: 4px;
        }

        .timer-controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }

        .timer-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .timer-btn.start {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .timer-btn.pause {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .timer-btn.reset {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }

        .timer-btn:hover {
            transform: scale(1.05);
        }

        .timer-btn:disabled {
            background: #374151;
            cursor: not-allowed;
            transform: none;
        }

        .form-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .form-card {
            background: rgba(30, 41, 59, 0.8);
            padding: 30px;
            border-radius: 12px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(139, 92, 246, 0.2);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #cbd5e1;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(75, 85, 99, 0.5);    
            border-radius: 8px;
            background: rgba(75, 85, 99, 0.3);
            color: white;
            font-size: 1em;
        }

        .form-group input:focus {
            outline: none;
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }

        .exercise-inputs {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 10px;
            align-items: end;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .exercise-list {
            margin-top: 20px;
        }

        .exercise-list h4 {
            margin-bottom: 15px;
            color: #8b5cf6;
        }

        .exercise-item {
            background: rgba(75, 85, 99, 0.3);
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .current-exercise {
            background: rgba(139, 92, 246, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .current-exercise p {
            margin: 0;
            color: #cbd5e1;
        }

        .timer-settings {
            margin-bottom: 20px;
        }

        .timer-settings input {
            width: 80px;
            padding: 8px;
            border: 1px solid rgba(75, 85, 99, 0.5);
            border-radius: 6px;
            background: rgba(75, 85, 99, 0.3);
            color: white;
            text-align: center;
        }

        .logout-btn {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
            position: absolute;
            top: 20px;
            right: 20px;
        }

        .logout-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
        }
    </style>
</head>
<body>
    <div class="container">
        
        <div class="header">
            <h1>🏋️ FITAPP</h1>
            <p>Tu administrador personal de rutinas de gimnasio</p>
        </div>

        
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('dashboard')">📊 Panel</button>
            <button class="nav-tab" onclick="showTab('routines')">📅 Rutinas</button>
            <button class="nav-tab" onclick="showTab('timer')">⏱️ Tiempo</button>
            <button class="nav-tab" onclick="showTab('create')">➕ Crear Rutina</button>
        </div>

        
        <div id="dashboard" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Entrenamientos</h3>
                    <div class="value">24</div>
                </div>
                <div class="stat-card">
                    <h3>Rutinas Activas</h3>
                    <div class="value" id="routineCount">2</div>
                </div>
                <div class="stat-card">
                    <h3>Peso Máximo</h3>
                    <div class="value">85kg</div>
                </div>
                <div class="stat-card">
                    <h3>Racha Actual</h3>
                    <div class="value">7 días</div>
                </div>
            </div>
            
            <div class="chart-container">
                <h3>Progreso - Press de Banca</h3>
                <canvas id="progressChart" class="chart"></canvas>
            </div>
        </div>

        
        <div id="routines" class="tab-content">
            <h2 style="margin-bottom: 20px;">Mis Rutinas</h2>
            <div class="routines-grid" id="routinesContainer">
           
            </div>
        </div>

       
        <div id="timer" class="tab-content">
            <div class="timer-container">
                <div class="timer-card">
                    <h2>Cronómetro de Descanso</h2>
                    
                    <div id="currentExerciseInfo" class="current-exercise" style="display: none;">
                        <p><strong>Ejercicio actual:</strong></p>
                        <p id="currentExerciseName"></p>
                    </div>

                    <div class="timer-display" id="timerDisplay">01:00</div>
                    
                    <div class="timer-progress">
                        <div class="timer-progress-bar" id="progressBar"></div>
                    </div>

                    <div class="timer-settings">
                        <label>Duración (segundos): </label>
                        <input type="number" id="timerDuration" value="60" min="1" max="600">
                    </div>

                    <div class="timer-controls">
                        <button class="timer-btn start" id="startBtn" onclick="startTimer()">▶️ Iniciar</button>
                        <button class="timer-btn pause" id="pauseBtn" onclick="pauseTimer()" disabled>⏸️ Pausar</button>
                        <button class="timer-btn reset" id="resetBtn" onclick="resetTimer()">🔄 Reiniciar</button>
                    </div>
                </div>
            </div>
        </div>

        
        <div id="create" class="tab-content">
            <div class="form-container">
                <div class="form-card">
                    <h2>Crear Nueva Rutina</h2>
                    
                    <div class="form-group">
                        <label>Nombre de la Rutina</label>
                        <input type="text" id="routineName" placeholder="Ej: Push Day, Pull Day, Leg Day...">
                    </div>

                    <hr style="border: 1px solid rgba(75, 85, 99, 0.5); margin: 30px 0;">

                    <h3 style="margin-bottom: 15px;">Agregar Ejercicio</h3>
                    <div class="exercise-inputs">
                        <div class="form-group">
                            <label>Ejercicio</label>
                            <input type="text" id="exerciseName" placeholder="Nombre del ejercicio">
                        </div>
                        <div class="form-group">
                            <label>Series</label>
                            <input type="number" id="exerciseSets" value="1" min="1">
                        </div>
                        <div class="form-group">
                            <label>Reps</label>
                            <input type="number" id="exerciseReps" value="1" min="1">
                        </div>
                        <div class="form-group">
                            <label>Peso (kg)</label>
                            <input type="number" id="exerciseWeight" value="0" min="0">
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="addExercise()" style="margin-top: 10px;">Agregar Ejercicio</button>

                    <div class="exercise-list" id="exerciseList" style="display: none;">
                        <h4>Ejercicios en la Rutina</h4>
                        <div id="exerciseItems"></div>
                        <button class="btn btn-success" onclick="saveRoutine()" style="width: 100%; margin-top: 15px;">Guardar Rutina</button>
                    </div>
                </div>
            </div>
        </div>

        <button id="btn-logout" class="logout-btn">Cerrar sesión</button>
    </div>

    <script>
        
        let routines = [
            {
                id: 1,
                name: 'Push Day',
                exercises: [
                    { name: 'Press de Banca', sets: 4, reps: 8, weight: 80 },
                    { name: 'Press Militar', sets: 3, reps: 10, weight: 50 },
                    { name: 'Dips', sets: 3, reps: 12, weight: 0 }
                ]
            },
            {
                id: 2,
                name: 'Pull Day',
                exercises: [
                    { name: 'Dominadas', sets: 4, reps: 8, weight: 0 },
                    { name: 'Remo con Barra', sets: 4, reps: 10, weight: 70 },
                    { name: 'Curl de Bíceps', sets: 3, reps: 12, weight: 20 }
                ]
            }
        ];

        let currentRoutine = { name: '', exercises: [] };
        let timerInterval = null;
        let currentTime = 60;
        let timerDuration = 60;
        let isRunning = false;
        let currentExercise = null;

       
        function showTab(tabName) {
            
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            
            if (tabName === 'dashboard') {
                drawProgressChart();
            } else if (tabName === 'routines') {
                renderRoutines();
            }
        }

        
        function renderRoutines() {
            const container = document.getElementById('routinesContainer');
            container.innerHTML = '';

            routines.forEach(routine => {
                const routineCard = document.createElement('div');
                routineCard.className = 'routine-card';
                routineCard.innerHTML = `
                    <h3>${routine.name}</h3>
                    ${routine.exercises.map(exercise => `
                        <div class="exercise">
                            <div class="exercise-info">
                                <div class="exercise-name">${exercise.name}</div>
                                <div class="exercise-details">${exercise.sets} series • ${exercise.reps} reps • ${exercise.weight}kg</div>
                            </div>
                            <button class="start-btn" onclick="startExerciseTimer('${exercise.name}')">Iniciar</button>
                        </div>
                    `).join('')}
                `;
                container.appendChild(routineCard);
            });

            
            document.getElementById('routineCount').textContent = routines.length;
        }

        
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function updateTimerDisplay() {
            document.getElementById('timerDisplay').textContent = formatTime(currentTime);
            const progress = ((timerDuration - currentTime) / timerDuration) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                document.getElementById('startBtn').disabled = true;
                document.getElementById('pauseBtn').disabled = false;
                
                timerInterval = setInterval(() => {
                    currentTime--;
                    updateTimerDisplay();
                    
                    if (currentTime <= 0) {
                        resetTimer();
                        // Notificación personalizada SweetAlert2
                        Swal.fire({
                            icon: 'success',
                            title: '⏰ ¡Tiempo de descanso terminado!',
                            text: '¡Vamos con el siguiente ejercicio!',
                            confirmButtonColor: '#8b5cf6',
                            background: '#1e293b',
                            color: '#fff',
                            showClass: {
                                popup: 'animate__animated animate__bounceIn'
                            },
                            hideClass: {
                                popup: 'animate__animated animate__fadeOutUp'
                            }
                        });
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
        }

        function resetTimer() {
            isRunning = false;
            clearInterval(timerInterval);
            timerDuration = parseInt(document.getElementById('timerDuration').value);
            currentTime = timerDuration;
            updateTimerDisplay();
            document.getElementById('startBtn').disabled = false;
            document.getElementById('pauseBtn').disabled = true;
        }

        function startExerciseTimer(exerciseName) {
            currentExercise = exerciseName;
            document.getElementById('currentExerciseName').textContent = exerciseName;
            document.getElementById('currentExerciseInfo').style.display = 'block';
            showTab('timer');
            document.querySelector('[onclick="showTab(\'timer\')"]').classList.add('active');
        }

        
        document.getElementById('timerDuration').addEventListener('change', function() {
            if (!isRunning) {
                resetTimer();
            }
        });

        
        function addExercise() {
            const name = document.getElementById('exerciseName').value;
            const sets = parseInt(document.getElementById('exerciseSets').value);
            const reps = parseInt(document.getElementById('exerciseReps').value);
            const weight = parseFloat(document.getElementById('exerciseWeight').value);

            if (name.trim()) {
                currentRoutine.exercises.push({ name, sets, reps, weight });
                
                // Limpiar campos
                document.getElementById('exerciseName').value = '';
                document.getElementById('exerciseSets').value = '1';
                document.getElementById('exerciseReps').value = '1';
                document.getElementById('exerciseWeight').value = '0';

                renderCurrentExercises();

                // Notificación personalizada SweetAlert2 al agregar ejercicio
                Swal.fire({
                    icon: 'success',
                    title: '🏋️‍♂️ ¡Ejercicio agregado!',
                    text: '¡Sigue así, campeón!',
                    confirmButtonColor: '#8b5cf6',
                    background: '#1e293b',
                    color: '#fff',
                    showClass: {
                        popup: 'animate__animated animate__bounceIn'
                    },
                    hideClass: {
                        popup: 'animate__animated animate__fadeOutUp'
                    }
                });
            }
        }

        function renderCurrentExercises() {
            const container = document.getElementById('exerciseItems');
            const list = document.getElementById('exerciseList');
            
            if (currentRoutine.exercises.length > 0) {
                list.style.display = 'block';
                container.innerHTML = currentRoutine.exercises.map((exercise, index) => `
                    <div class="exercise-item">
                        <span>${exercise.name}</span>
                        <span>${exercise.sets}x${exercise.reps} - ${exercise.weight}kg</span>
                    </div>
                `).join('');
            } else {
                list.style.display = 'none';
            }
        }

        function saveRoutine() {
            const routineName = document.getElementById('routineName').value;
            
            if (routineName.trim() && currentRoutine.exercises.length > 0) {
                routines.push({
                    id: Date.now(),
                    name: routineName,
                    exercises: [...currentRoutine.exercises]
                });

                // Limpiar formulario
                document.getElementById('routineName').value = '';
                currentRoutine = { name: '', exercises: [] };
                renderCurrentExercises();

                Swal.fire({
                    icon: 'success',
                    title: '🎉 Rutina guardada exitosamente!',
                    text: '¡Tu nueva rutina está lista!',
                    confirmButtonColor: '#8b5cf6',
                    background: '#1e293b',
                    color: '#fff',
                    showClass: {
                        popup: 'animate__animated animate__bounceIn'
                    },
                    hideClass: {
                        popup: 'animate__animated animate__fadeOutUp'
                    }
                });
                showTab('routines');
                document.querySelector('[onclick="showTab(\'routines\')"]').classList.add('active');
            } else {
                Swal.fire({
                    icon: 'warning',
                    title: 'Faltan datos',
                    text: 'Por favor, ingrese un nombre para la rutina y al menos un ejercicio.',
                    confirmButtonColor: '#f59e0b',
                    background: '#1e293b',
                    color: '#fff'
                });
            }
        }

        // Gráfico de progreso
        function drawProgressChart() {
            const canvas = document.getElementById('progressChart');
            const ctx = canvas.getContext('2d');
            
            // Configurar canvas
            canvas.width = canvas.offsetWidth;
            canvas.height = 300;
            
            // Datos de ejemplo
            const data = [
                { date: '15/01', weight: 75 },
                { date: '17/01', weight: 77.5 },
                { date: '19/01', weight: 80 },
                { date: '22/01', weight: 80 },
                { date: '24/01', weight: 82.5 },
                { date: '26/01', weight: 85 }
            ];

            const padding = 50;
            const chartWidth = canvas.width - 2 * padding;
            const chartHeight = canvas.height - 2 * padding;
            
            const minWeight = Math.min(...data.map(d => d.weight)) - 5;
            const maxWeight = Math.max(...data.map(d => d.weight)) + 5;
            
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
           
            ctx.strokeStyle = '#8b5cf6';
            ctx.fillStyle = '#8b5cf6';
            ctx.lineWidth = 3;
            ctx.font = '12px Arial';
            ctx.fillStyle = '#cbd5e1';

        
            ctx.beginPath();
            ctx.moveTo(padding, padding);
            ctx.lineTo(padding, canvas.height - padding);
            ctx.lineTo(canvas.width - padding, canvas.height - padding);
            ctx.strokeStyle = '#4b5563';
            ctx.stroke();

            
            ctx.beginPath();
            ctx.strokeStyle = '#8b5cf6';
            
            data.forEach((point, index) => {
                const x = padding + (index / (data.length - 1)) * chartWidth;
                const y = canvas.height - padding - ((point.weight - minWeight) / (maxWeight - minWeight)) * chartHeight;
                
                if (index === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
                
               
                ctx.fillStyle = '#8b5cf6';
                ctx.beginPath();
                ctx.arc(x, y, 5, 0, 2 * Math.PI);
                ctx.fill();
                
                
                ctx.fillStyle = '#cbd5e1';
                ctx.fillText(point.date, x - 15, canvas.height - padding + 20);
                ctx.fillText(point.weight + 'kg', x - 15, y - 10);
            });
            
            ctx.stroke();
        }

        // Inicializar la aplicación
        document.addEventListener('DOMContentLoaded', function() {
            renderRoutines();
            updateTimerDisplay();
            drawProgressChart();
        });

        document.getElementById('btn-logout').onclick = () => {
            localStorage.removeItem('usuario');
            window.location.href = "/frontend/login.html";
        };

        document.addEventListener('DOMContentLoaded', () => {
    const usuario = localStorage.getItem('usuario');
    if (!usuario) {
        window.location.href = "/frontend/login.html";
    }
});
    </script>
</body>
</html>